{% extends "base.html" %}

{% load static %}

{% block title %}Календарь{% endblock %}

{% block content %}

<div class="d-flex justify-content-center align-items-center gap-3 mb-4 mt-4">
  <a href="?year={{ prev_year }}&month={{ prev_month }}" class="month-nav-btn" title="Предыдущий месяц">
    <i class="bi bi-chevron-left"></i>
  </a>
  <h2 class="m-0 fw-bold text-primary">{{ month_name }} {{ year }}</h2>
  <a href="?year={{ next_year }}&month={{ next_month }}" class="month-nav-btn" title="Следующий месяц">
    <i class="bi bi-chevron-right"></i>
  </a>
</div>

<div class="calendar-grid m-3">
  <div class="calendar-header">Пн</div>
  <div class="calendar-header">Вт</div>
  <div class="calendar-header">Ср</div>
  <div class="calendar-header">Чт</div>
  <div class="calendar-header">Пт</div>
  <div class="calendar-header">Сб</div>
  <div class="calendar-header">Вс</div>

  {% for day in days %}
    {% if day %}
      <div class="calendar-day {% if day.is_today %}calendar-today{% endif %}"
           title="{{ day.date|date:'d E Y' }}">
        <div class="day-number">{{ day.number }}</div>
        {% for news in day.news %}
          <div class="calendar-news my-1">
            <a href="{{ news.get_absolute_url }}" class="news-link" title="{{ news.name }}">
              Новость: {{ news.name|truncatechars:15 }}
            </a>
          </div>
        {% endfor %}
        {% for event in day.events %}
                <div class="calendar-event">
                    <a href="{{ event.get_absolute_url }}"
                       class="event-link"
                       title="{{ event.title }}">
                        Событие: {{ event.title|truncatechars:15 }}
                    </a>
                </div>
            {% endfor %}
      </div>
    {% else %}
      <div></div>
    {% endif %}
  {% endfor %}
</div>
{% endblock %}